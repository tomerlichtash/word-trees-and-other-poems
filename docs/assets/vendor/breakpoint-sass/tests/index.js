var sass=require("node-sass"),jsdiff=require("diff"),fs=require("fs-extra"),i=0,glob=require("glob");glob("./tests/**/*.scss",function(s,e){if(s)throw s;e.forEach(function(s){"_"!==s.charAt(0)&&sass.render({file:s,outputStyle:"expanded",includePaths:["../stylesheets/","../vendor/ruby/2.0.0/gems/sassy-maps-0.4.0/sass/","../vendor/ruby/2.0.0/gems/breakpoint-2.5.0/stylesheets/"]},function(s,e){if(s)throw s;var r=e.stats.entry.split("/");r=r[r.length-1],r=r.replace(".scss",".css"),"_"!==r.charAt(0)&&fs.readFile("./controls/"+r,function(s,t){var i=jsdiff.diffCss(t.toString(),e.css.toString()),f=0;i.forEach(function(s){var e=s.added?"green":s.removed?"red":"grey";"grey"!==e&&f++}),f&&(console.log(r),i=jsdiff.createPatch(r,t.toString(),e.css.toString()),fs.outputFile("./diff/"+r+".diff",i,function(s,e){if(s)throw s}))})})})});